# 前后端通信
## 常用请求方法
### HTTP 0.9
- GET
### HTTP1.0
- POST
- HEAD
	- 描述
		- HEAD方法和GET方法一样，知识不返回豹纹的主体部分，用于确认URI的有效性及资源更新的日期时间等。
	- 具体
		- （1）可以在不获取资源的情况下很快地就能了解到资源的情况，比如其类型，其文件大小，
		- （2）也可以通过响应码查看是否存在该资源，
		- （3）也可以检测资源是否被修改了。
	- HEAD方法和GET方法的区别： GET方法有实体，HEAD方法无实体。
### HTTP1.1
- PUT
	- 描述
		- PUT方法用来传输文件，就像FTP协议的文件上传一样，要求在请求报文的主体中包含文件内容，然后保存在请求URI指定的位置。但是HTTP/1.1的PUT方法自身不带验证机制，任何人都可以上传文件，存在安全问题，故一般不用。
	- 什么时候用POST或PUT？
		- 取决于这个REST服务的行为是否是idempotent（等幂）的（一个方法重复执行多次，产生的效果是一样的）
		- 假如我们发送两个http://superblogging/blogs/post/Sample请求，服务器端是什么样的行为？如果产生了两个博客帖子，那就说明这个服务不是idempotent的，因为多次使用产生了副作用了嘛；如果后一个请求把第一个请求覆盖掉了，那这个服务就是idempotent的。前一种情况，应该使用POST方法，后一种情况，应该使用PUT方法。
- DELETE
	- 描述
		-  指明客户端想让服务器删除某个资源，与PUT方法相反，按URI删除指定资源
	- 响应
		- （1）如果响应里包含描述成功的实体，响应应该是200（Ok）
		- （2）如果DELETE动作没有通过，应该以202（已接受）响应
		- （3）如果DELETE方法请求已经通过了，但响应不包含实体，那么应该以204（无内容）响应。
- CONNECT
	- 描述
		- 
CONNECT方法是HTTP/1.1协议预留的，能够将连接改为管道方式的代理服务器。通常用于SSL加密服务器的链接与非加密的HTTP代理服务器的通信。
- OPTIONS
	- 描述
		- OPTIONS 方法请求 Web 服务器告知其支持的各种功能。可以询问服务器通常支持哪些方法，或者对某些特殊资源支持哪些方法。(有些服务器可能只支持对一些特殊类型的对象使用特定的操作)。
		- 通过使用 OPTIONS，客户端可以在与服务器进行交互之前，确定服务器的能力，这样它就可以更方便地与具备不同特性的代理和服务器进行互操作了。
		- 这为客户端应用程序提供了一种手段，使其不用实际访问那些资源就能判定访问各种资源的最优方式。
- TRACE
	- 描述
		- 
TRACE请求服务器回显其收到的请求信息，该方法主要用于HTTP请求的测试或诊断。
		- TRACE 响应的 Content-Type 为 message/http，状态为 200 OK。
	- 原理
		- 
TRACE 请求会在目的服务器端发起一个 环回 诊断。行程最后一站的服务器会弹回一条 TRACE 响应，并在响应主体中携带它收到的原始请求报文。这样客户端就可以查看在所有中间 HTTP 应用程序组成的请求 / 响应链上，原始报文是否，以及如何被毁坏或修改过。
### HTTP1.1 扩展
- PATCH
	- 描述
		- PATCH请求与PUT请求类似，同样用于资源的更新。二者有以下两点不同：
			- PATCH一般用于资源的部分更新，而PUT一般用于资源的整体更新。
			- 当资源不存在时，PATCH会创建一个新的资源，而PUT只会对已在资源进行更新。
## GET、POST方法区别
### （1）GET在浏览器回退时是无害的，而POST会再次提交请求。
### （2）GET产生的URL地址可以被Bookmark，而POST不可以。
### （3）GET请求会被浏览器主动cache，而POST不会，除非手动设置。
### （4）GET请求只能进行url编码，而POST支持多种编码方式。
### （5）GET请求参数会被完整保留在浏览器历史记录里，而POST中的参数不会被保留。
### （6）GET请求在URL中传送的参数是有长度限制的，而POST么有。
### （7）对参数的数据类型，GET只接受ASCII字符，而POST没有限制。
### （8）GET比POST更不安全，因为参数直接暴露在URL上，所以不能用来传递敏感信息。
### （9）GET参数通过URL传递，POST放在Request body中。
### （10）GET产生一个TCP数据包；POST产生两个TCP数据包。
- 对于GET方式的请求，浏览器会把http header和data一并发送出去，服务器响应200（返回数据）；
- 而对于POST，浏览器先发送header，服务器响应100 continue，浏览器再发送data，服务器响应200 ok（返回数据）。
## 常用content-type类型
### （1）application/x-www-form-urlencoded 
- 描述
	- 1）浏览器的原生form表单
	- 2） 提交的数据按照 key1=val1&key2=val2 的方式进行编码，key和val都进行了URL转码
- 具体
### （2）multipart/form-data
- 描述
	- 主要用于上传文件。（使用表单上传文件时，必须让 form 的 enctype 等于这个值。）
首先生成一个 boundary 用于分割不同的字段，为了避免与正文内容重复，boundary 很长很复杂。
	- 消息主体里按照字段个数又分为多个结构类似的部分，每部分都是以 --boundary 开始，紧接着是内容描述信息，然后是回车，最后是字段具体内容（文本或二进制）。
	- 如果传输的是文件，还要包含文件名和文件类型信息。消息主体最后以 --boundary-- 标示结束。
- 具体
### （3）application/json
- 描述
	- Json格式⽀支持比键值对复杂地多的数据，适合restful的接⼝口。
- 具体
### （4）text/html、text/plain、text/xml
- HTML格式、纯文本格式、XML格式
## 常见状态码含义
### 1xx
- 100（Continue/继续）
	- 请求者应当继续提出请求。服务器返回此代码表示已收到请求的第一部分，正在等待其余部分。
- 101（Switching Protocols/切换协议）
	- 请求者已要求服务器切换协议，服务器已确认并准备切换。主要用于websocket，也可以用于http2的升级。
### 2xx
- 200（OK/正常）
	- 服务器已经成功处理了请求。通常，这表示服务器提供了请求的网页。
- 201（Created/已创建）
	- 请求成功并且服务器创建了新的资源
- 202（Accepted/已接受）
	- 服务器已接受请求，但尚未处理
- 203 (Non-Authoritative Information/非官方信息)
	- 服务器已经成功处理了请求，但返回的信息可能来自另一来源
- 204（NO Content/无内容）
	- 服务器成功处理了请求，但没有返回任何内容
- 205 (Reset Content/重置内容)
	- 服务器成功处理了请求，但没有返回任何内容
- 206 (Partial Content/局部内容)
	- 该状态码表示客户端进行了请求，请求资源的某一部分，而服务器成功执行了这部分的 GET 请求，响应报文中包含由 Content-Range 指定范围的实体内容
### 3xx
- 300（Multiple Choices/多重选择）
	-  针对请求，服务器可执行多种操作。服务器可根据请求者（user agent）选择一项操作，或提供操作列表供请求者选择。
- 301（Moved Permanently/永久重定向）
	- 永久性重定向
- 302（Found/临时重定向）
	- 临时性重定向
- 303 （See Other/参见其他信息）
	- 该状态码表示由于请求对应的资源存在着另一个 URI，应使用 GET 方法定向获取请求的资源。
	- 303 状态码和 302 Found 状态码有着相同的功能，但 303 状态码明确表示客户端应当采用 GET 方法获取资源，这点与 302 状态码有区别。 
- 304（Not Modified/未修改）
	- 自动上次请求后，请求的网页未修改过。服务器返回此响应，不会返回网页的内容（协商缓存）
- 305（Use Proxy/使用代理）
	- 请求者只能使用代理访问请求的网页。如果服务器返回此响应，还表示请求者应使用代理
- 307（Temporary Redirect /临时重定向）
	- 用于HSTS跳转。全称HTTP严格传输安全（HTTP Strict Transport Security，縮寫：HSTS）。功能是要求浏览器下次访问该站点时使用HTTPS来访问，而不再需要先是HTTP再转HTTPS。这样可以避免SSL剥离攻击，具体使用方法是在服务器响应头中添加 Strict-Transport-Security，可以设置 max-age
	- SSL剥离攻击（攻击HTTPS）
		- 描述
			- 即攻击者在用户使用http访问的过程中进行攻击，对服务器冒充自己是用户，在攻击者和服务器中使用https访问，在用户和服务器中使用http访问。
		- 另一种攻击号称安全的HTTPS的方法是：SSL挟持
			- 大概就是信任第三方的安全证书，这点被利用于代理软件监听https。
### 4xx
- 400（Bad Request/错误请求）
	- 服务器不理解请求的语法
- 401（Unauthorized/未验证）
	- 请求要求身份验证。对于需要登录的网页，服务器可能返回此响应
- 403（Forbidden/禁止）
	- 没有权限请求，表示除非拥有授权，否则服务器拒绝提供所请求的资源。
- 404（Not Found/未找到）
	- 服务器找不到请求的网页
- 405 (Method Not Allowed/方法未允许)
	- 禁用请求中指定的方法
- 406 (Not Acceptable/无法访问)
	- 表示请求资源的MIME类型与客户端中Accept头信息中指定的类型不一致，无法使用请求的内容特性响应请求的网页
- 407 (Proxy Authentication Required/代理服务器认证要求)
	- 与401状态有些相似，只是这个状态用于代理服务器。该状态指出客户端必须通过代理服务器的认证。代理服务器返回一个Proxy-Authenticate响应头信息给客户端，这会引起客户端使用带有Proxy-Authorization请求的头信息重新连接。
- 408 (Request Timeout/请求超时)
	- 是指服务端等待客户端发送请求的时间过长。
- 409 (Conflict/冲突)：
	- 该状态通常与PUT请求一同使用，常被用于试图上传版本不正确的文件时。
- 410 (Gone/已经不存在)
	- 告诉客户端所请求的文档已经不存在并且没有更新的地址。410状态不同于404，410是在指导文档已被移走的情况下使用，而404则用于未知原因的无法访问。
- 411 (Length Required/需要数据长度)
	- 服务器不接受不含有效内容长度标头字段的请求，除非客户端发送Content-Length头信息指出发送给服务器的数据的大小。
- 412 (Precondition Failed/未满足前提条件)
	- 服务器未满足请求者在请求者设置的其中一个前提条件
- 413 (Request Entity Too Large/请求实体过大)
	- 服务器无法处理请求，因为请求实体过大，超出了服务器的处理能力
- 414 (Request URI Too Long/请求URI过长)
	- 请求的URI（通常为网址）过长，服务器无法处理
- 415 (Unsupported Media Type/不支持的媒体类型)
	- 请求的格式不受请求页面的支持
- 416 (Requested Range Not Satisfiable/请求范围无法满足)
	- 表示客户端包含了一个服务器无法满足的Range头信息的请求，如果页面无法提供请求的范围，则服务器会返回此状态码
- 417 (Expectation Failed/期望失败)
	- 如果服务器得到一个带有100-continue值的Expect请求头信息，这是指客户端正在询问是否可以在后面的请求中发送附件。在这种情况下，服务器也会用该状态(417)告诉浏览器服务器不接收该附件或用100 (SC_CONTINUE)状态告诉客户端可以继续发送附件
### 5xx
- 500 (Internal Server Error/服务器内部错误)
	- 服务器遇到错误，无法完成请求
- 501 (Not Implemented/未实现)
	- 服务器不具备完成此请求中要求的功能。例如，服务器无法识别请求方法时可能会返回此代码，或者客户端执行了如PUT这样的服务器并不支持的命令。
- 502 (Bad Gateway/错误的网关)
	- 服务器作为网关或代理，从上游服务器无法收到无效响应
- 503 (Service Unavailable/服务器不可用)
	- 服务器目前无法使用（由于超载或者停机维护）。通常，这只是暂时状态
- 504 (Gateway Timeout/网关超时)
	- 服务器作为网关代理，但是没有及时从上游服务器收到请求
- 505 (HTTP Version Not Supported/不支持的 HTTP 版本)
	- 服务器并不支持在请求中所标明 HTTP 版本
